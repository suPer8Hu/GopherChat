export type Lang = "en" | "zh";

type Dict = Record<string, string>;

export const dictionaries: Record<Lang, Dict> = {
  en: {
    "common.save": "Save",
    "common.cancel": "Cancel",
    "common.close": "Close",
    "common.dismiss": "Dismiss",
    "lang.toggle": "中文",
    "home.login": "Login",
    "home.tagline": "A fluid space for focused AI conversations.",
    "home.developer": "Developer: Hu",
    "home.startChat": "Start a chat",
    "home.demo": "Try demo",
    "login.title": "Login",
    "login.home": "Home",
    "login.email": "Email",
    "login.password": "Password",
    "login.failed": "Login failed",
    "login.loggingIn": "Logging in...",
    "login.cta": "Login",
    "login.forgot": "Forgot password?",
    "login.noAccount": "No account?",
    "login.create": "Create one",
    "register.email": "Email",
    "register.title": "Register",
    "register.emailRequired": "Email required",
    "register.captcha": "Captcha",
    "register.sendCode": "Send code",
    "register.sendFailed": "Failed to send captcha",
    "register.sending": "Sending...",
    "register.resendIn": "Resend in {{seconds}}s",
    "register.codeExpires": "Code expires in 5 minutes.",
    "register.password": "Password",
    "register.confirmPassword": "Confirm password",
    "register.required": "Email, captcha, and password are required",
    "register.passwordsMismatch": "Passwords do not match",
    "register.failed": "Registration failed",
    "register.creating": "Creating account...",
    "register.createAccount": "Create account",
    "register.haveAccount": "Already have an account?",
    "register.login": "Login",
    "forgot.title": "Reset password",
    "forgot.back": "Back to login",
    "forgot.emailRequired": "Email required",
    "forgot.captcha": "Captcha",
    "forgot.sendFailed": "Failed to send captcha",
    "forgot.required": "Email, captcha, and new password are required",
    "forgot.passwordsMismatch": "Passwords do not match",
    "forgot.updated": "Password updated. You can log in now.",
    "forgot.resetFailed": "Reset failed",
    "forgot.sending": "Sending...",
    "forgot.sendCode": "Send code",
    "forgot.resendIn": "Resend in {{seconds}}s",
    "forgot.codeExpires": "Code expires in 5 minutes.",
    "forgot.newPassword": "New password",
    "forgot.confirmNewPassword": "Confirm new password",
    "forgot.updating": "Updating...",
    "forgot.update": "Update password",
    "sessions.title": "Sessions",
    "sessions.new": "New",
    "sessions.refresh": "Refresh",
    "sessions.loading": "Loading...",
    "sessions.none": "No sessions.",
    "sessions.loadMore": "Load more",
    "sessions.noMore": "No more",
    "sessions.loadFailed": "Failed to load sessions",
    "sessions.loadMoreFailed": "Failed to load more",
    "sessions.updatedAt": "updated {{time}}",
    "chat.title": "Chat",
    "chat.signedInAs": "Signed in as {{email}}",
    "chat.loadingUser": "Loading user...",
    "chat.sessionCreating": "· creating session...",
    "chat.sessionLabel": "· session={{sessionId}}",
    "chat.logout": "Logout",
    "chat.deliveryFailed": "Message delivery failed",
    "chat.deliveryFailedDesc": "We could not reach the AI service. Your message is queued and will retry automatically.",
    "chat.messages": "Messages",
    "chat.refresh": "Refresh",
    "chat.selectSession": "Select a session on the left, or click New chat.",
    "chat.loadOlder": "Load older",
    "chat.noMoreHistory": "No more history",
    "chat.endHistory": "end of history",
    "chat.noMessages": "No messages yet.",
    "chat.streaming": "assistant · streaming",
    "chat.send": "Send",
    "chat.responseMode": "Response mode",
    "chat.full": "Full",
    "chat.stream": "Stream",
    "chat.typeMessage": "Type a message...",
    "chat.streamingState": "Streaming...",
    "chat.sendingState": "Sending...",
    "chat.sessionNotReady": "Session not ready yet. Try again in a moment.",
    "chat.createSessionFailed": "Failed to create a new session.",
    "chat.loadOlderFailed": "Failed to load older messages",
    "chat.loadMeFailed": "Failed to load /me",
    "chat.loadMessagesFailed": "Failed to load messages",
    "chat.sendFailed": "Failed to send",
    "chat.asyncFailed": "Async job failed",
    "chat.streamError": "Stream error",
    "chat.streamFailed": "Stream failed",
    "chat.missingApiBase": "API base URL is missing.",
    "chat.notAuthed": "Not authenticated.",
    "sidebar.sessions": "Sessions",
    "sidebar.newSettings": "New session settings",
    "sidebar.provider": "Provider",
    "sidebar.model": "Model",
    "sidebar.modelPlaceholder": "model-name",
    "sidebar.custom": "Custom…",
    "sidebar.usedWhen": "Used when you click “New chat”.",
    "sidebar.newChat": "New chat",
    "sidebar.loading": "Loading…",
    "sidebar.noSessions": "No sessions yet.",
    "sidebar.rename": "Rename",
    "sidebar.delete": "Delete",
    "sidebar.loadMore": "Load more",
    "sidebar.noMore": "No more",
    "sidebar.profile": "Profile",
    "sidebar.tip": "Tip: sessions are the “left list”, messages are inside a session.",
    "profile.loading": "Loading profile…",
    "profile.email": "Email:",
    "profile.username": "Username:",
    "profile.changePassword": "Change password",
    "profile.passwordRequired": "Old and new password are required.",
    "profile.passwordMismatch": "New passwords do not match.",
    "profile.currentPassword": "Current password",
    "profile.newPassword": "New password",
    "profile.confirmPassword": "Confirm new password",
    "profile.updatePassword": "Update password",
    "profile.deleteAccount": "Delete account",
    "profile.deleteWarn": "This will permanently remove your account and all sessions.",
    "profile.deleteConfirm": "Confirm password",
    "profile.cancel": "Cancel",
    "profile.confirmDelete": "Confirm delete",
    "profile.openFailed": "Failed to load profile",
    "profile.passwordUpdated": "Password updated",
    "profile.passwordUpdateFailed": "Failed to update password",
    "profile.deletePasswordRequired": "Password required to delete account.",
    "profile.deleteFailed": "Failed to delete account",
    "profile.deleteStart": "Delete account",
    "session.deleteTitle": "Delete session?",
    "session.deleteDesc": "This will permanently delete {{title}} and all its messages.",
    "session.renameFailed": "Failed to rename session",
    "session.deleteFailed": "Failed to delete session",
    "session.newTitle": "New title",
    "tip.welcome": "Welcome to Gopherchat",
    "tip.body": "Before you start chatting with the AI, create your first session window.",
    "tip.later": "Later",
    "tip.create": "Create session",
    "sidebar.expand": "Expand sidebar",
    "sidebar.collapse": "Collapse sidebar",
    "demo.title": "Guest demo",
    "demo.hint": "Guest mode · openrouter/auto · not saved after refresh",
    "demo.backHome": "Back to home",
    "demo.login": "Login",
    "demo.empty": "Start by typing a message below.",
    "demo.placeholder": "Type a message...",
    "demo.send": "Send",
    "demo.sending": "Sending...",
    "demo.failed": "Demo chat failed",
    "vision.title": "Vision",
    "vision.subtitle": "Upload an image for quick classification.",
    "vision.backChat": "Back to chat",
    "vision.openPage": "Open vision",
    "vision.upload": "Upload image",
    "vision.supported": "JPEG/PNG/GIF · up to 200MB",
    "vision.topK": "Top-K",
    "vision.recognize": "Recognize",
    "vision.recognizing": "Recognizing...",
    "vision.preview": "Preview",
    "vision.noPreview": "No image yet.",
    "vision.results": "Results",
    "vision.noResults": "No results yet.",
    "vision.noFile": "Please choose an image.",
    "vision.error": "Recognition failed",
    "vision.score": "Score",
    "vision.askTitle": "Ask about the image",
    "vision.askPlaceholder": "Ask a question about the image...",
    "vision.ask": "Ask",
    "vision.asking": "Asking...",
    "vision.noAnswer": "No answer yet.",
    "vision.askFailed": "Vision chat failed",
    "vision.questionRequired": "Please enter a question.",
    "vision.quotaExceeded": "Token quota reached. Please try again later.",
    "vision.vlmUnavailableTitle": "Vision chat unavailable",
    "vision.vlmUnavailableDesc": "This feature is temporarily unavailable. It will be opened once the paid plan is enabled. Stay tuned.",
  },
  zh: {
    "common.save": "保存",
    "common.cancel": "取消",
    "common.close": "关闭",
    "common.dismiss": "关闭",
    "lang.toggle": "EN",
    "home.login": "登录",
    "home.tagline": "一个专注且流动的 AI 对话空间。",
    "home.developer": "开发者：Hu",
    "home.startChat": "开始对话",
    "home.demo": "试用 Demo",
    "login.title": "登录",
    "login.home": "主页",
    "login.email": "邮箱",
    "login.password": "密码",
    "login.failed": "登录失败",
    "login.loggingIn": "登录中...",
    "login.cta": "登录",
    "login.forgot": "忘记密码？",
    "login.noAccount": "没有账号？",
    "login.create": "创建一个",
    "register.email": "邮箱",
    "register.title": "注册",
    "register.emailRequired": "请输入邮箱",
    "register.captcha": "验证码",
    "register.sendCode": "发送验证码",
    "register.sendFailed": "验证码发送失败",
    "register.sending": "发送中...",
    "register.resendIn": "{{seconds}} 秒后重发",
    "register.codeExpires": "验证码 5 分钟内有效。",
    "register.password": "密码",
    "register.confirmPassword": "确认密码",
    "register.required": "邮箱、验证码和密码为必填项",
    "register.passwordsMismatch": "两次密码不一致",
    "register.failed": "注册失败",
    "register.creating": "创建中...",
    "register.createAccount": "创建账号",
    "register.haveAccount": "已有账号？",
    "register.login": "登录",
    "forgot.title": "重置密码",
    "forgot.back": "返回登录",
    "forgot.emailRequired": "请输入邮箱",
    "forgot.captcha": "验证码",
    "forgot.sendFailed": "验证码发送失败",
    "forgot.required": "邮箱、验证码和新密码为必填项",
    "forgot.passwordsMismatch": "两次密码不一致",
    "forgot.updated": "密码已更新，可以登录了。",
    "forgot.resetFailed": "重置失败",
    "forgot.sending": "发送中...",
    "forgot.sendCode": "发送验证码",
    "forgot.resendIn": "{{seconds}} 秒后重发",
    "forgot.codeExpires": "验证码 5 分钟内有效。",
    "forgot.newPassword": "新密码",
    "forgot.confirmNewPassword": "确认新密码",
    "forgot.updating": "更新中...",
    "forgot.update": "更新密码",
    "sessions.title": "会话",
    "sessions.new": "新建",
    "sessions.refresh": "刷新",
    "sessions.loading": "加载中...",
    "sessions.none": "暂无会话。",
    "sessions.loadMore": "加载更多",
    "sessions.noMore": "没有更多了",
    "sessions.loadFailed": "加载会话失败",
    "sessions.loadMoreFailed": "加载更多失败",
    "sessions.updatedAt": "更新于 {{time}}",
    "chat.title": "聊天",
    "chat.signedInAs": "已登录 {{email}}",
    "chat.loadingUser": "加载用户信息...",
    "chat.sessionCreating": "· 正在创建会话...",
    "chat.sessionLabel": "· 会话={{sessionId}}",
    "chat.logout": "退出登录",
    "chat.deliveryFailed": "消息发送失败",
    "chat.deliveryFailedDesc": "无法连接 AI 服务，消息已进入队列并会自动重试。",
    "chat.messages": "消息",
    "chat.refresh": "刷新",
    "chat.selectSession": "请在左侧选择会话，或点击新建会话。",
    "chat.loadOlder": "加载更早",
    "chat.noMoreHistory": "没有更多历史",
    "chat.endHistory": "历史已结束",
    "chat.noMessages": "暂无消息。",
    "chat.streaming": "assistant · 生成中",
    "chat.send": "发送",
    "chat.responseMode": "响应模式",
    "chat.full": "完整",
    "chat.stream": "流式",
    "chat.typeMessage": "输入你的消息...",
    "chat.streamingState": "生成中...",
    "chat.sendingState": "发送中...",
    "chat.sessionNotReady": "会话未准备好，请稍后重试。",
    "chat.createSessionFailed": "创建新会话失败。",
    "chat.loadOlderFailed": "加载历史消息失败",
    "chat.loadMeFailed": "加载用户信息失败",
    "chat.loadMessagesFailed": "加载消息失败",
    "chat.sendFailed": "发送失败",
    "chat.asyncFailed": "异步任务失败",
    "chat.streamError": "流式错误",
    "chat.streamFailed": "流式失败",
    "chat.missingApiBase": "缺少 API 地址配置。",
    "chat.notAuthed": "未登录。",
    "sidebar.sessions": "会话",
    "sidebar.newSettings": "新会话设置",
    "sidebar.provider": "提供方",
    "sidebar.model": "模型",
    "sidebar.modelPlaceholder": "模型名称",
    "sidebar.custom": "自定义…",
    "sidebar.usedWhen": "点击“新建会话”时使用。",
    "sidebar.newChat": "新建会话",
    "sidebar.loading": "加载中…",
    "sidebar.noSessions": "暂无会话。",
    "sidebar.rename": "重命名",
    "sidebar.delete": "删除",
    "sidebar.loadMore": "加载更多",
    "sidebar.noMore": "没有更多",
    "sidebar.profile": "个人资料",
    "sidebar.tip": "提示：左侧是会话列表，会话内是消息。",
    "profile.loading": "加载个人资料...",
    "profile.email": "邮箱：",
    "profile.username": "用户名：",
    "profile.changePassword": "修改密码",
    "profile.passwordRequired": "请输入旧密码和新密码。",
    "profile.passwordMismatch": "两次新密码不一致。",
    "profile.currentPassword": "当前密码",
    "profile.newPassword": "新密码",
    "profile.confirmPassword": "确认新密码",
    "profile.updatePassword": "更新密码",
    "profile.deleteAccount": "注销账号",
    "profile.deleteWarn": "这将永久删除你的账号和所有会话。",
    "profile.deleteConfirm": "确认密码",
    "profile.cancel": "取消",
    "profile.confirmDelete": "确认删除",
    "profile.openFailed": "加载个人资料失败",
    "profile.passwordUpdated": "密码已更新",
    "profile.passwordUpdateFailed": "更新密码失败",
    "profile.deletePasswordRequired": "需要密码才能删除账号。",
    "profile.deleteFailed": "删除账号失败",
    "profile.deleteStart": "注销账号",
    "session.deleteTitle": "删除会话？",
    "session.deleteDesc": "这将永久删除 {{title}} 及其所有消息。",
    "session.renameFailed": "重命名失败",
    "session.deleteFailed": "删除会话失败",
    "session.newTitle": "新标题",
    "tip.welcome": "欢迎使用 Gopherchat",
    "tip.body": "在开始和 AI 对话前，请先创建一个会话窗口。",
    "tip.later": "稍后",
    "tip.create": "创建会话",
    "sidebar.expand": "展开侧栏",
    "sidebar.collapse": "收起侧栏",
    "demo.title": "访客试用",
    "demo.hint": "访客模式 · openrouter/auto · 刷新后不会保存",
    "demo.backHome": "返回主页",
    "demo.login": "登录",
    "demo.empty": "从下方输入开始体验。",
    "demo.placeholder": "输入你的消息...",
    "demo.send": "发送",
    "demo.sending": "发送中...",
    "demo.failed": "试用对话失败",
    "vision.title": "视觉识别",
    "vision.subtitle": "上传图片进行快速分类识别。",
    "vision.backChat": "返回聊天",
    "vision.openPage": "打开视觉页",
    "vision.upload": "上传图片",
    "vision.supported": "支持 JPEG/PNG/GIF · 最大 200MB",
    "vision.topK": "Top-K",
    "vision.recognize": "开始识别",
    "vision.recognizing": "识别中...",
    "vision.preview": "预览",
    "vision.noPreview": "暂无图片",
    "vision.results": "识别结果",
    "vision.noResults": "暂无结果",
    "vision.noFile": "请先选择图片",
    "vision.error": "识别失败",
    "vision.score": "置信度",
    "vision.askTitle": "基于图片提问",
    "vision.askPlaceholder": "输入你想问的问题...",
    "vision.ask": "提问",
    "vision.asking": "提问中...",
    "vision.noAnswer": "暂无回答",
    "vision.askFailed": "视觉问答失败",
    "vision.questionRequired": "请先输入问题。",
    "vision.quotaExceeded": "额度已用尽，请稍后再试。",
    "vision.vlmUnavailableTitle": "视觉问答暂不可用",
    "vision.vlmUnavailableDesc": "该功能暂时无法使用，待付费模式开放后再上线，敬请期待。",
  },
};

export function translate(lang: Lang, key: string, vars?: Record<string, string | number>) {
  const dict = dictionaries[lang] || dictionaries.en;
  let out = dict[key] || dictionaries.en[key] || key;
  if (!vars) return out;
  for (const [k, v] of Object.entries(vars)) {
    out = out.replace(new RegExp(`{{${k}}}`, "g"), String(v));
  }
  return out;
}
